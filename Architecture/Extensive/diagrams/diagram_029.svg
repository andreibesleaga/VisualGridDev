<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="639px" preserveAspectRatio="none" style="width:765px;height:639px;background:#FFFFFF;" version="1.1" viewBox="0 0 765 639" width="765px" zoomAndPan="magnify"><title>Multi-Protocol Message Flow</title><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="227.5273" x="270.1633" y="27.9951">Multi-Protocol Message Flow</text><rect fill="none" height="396.3359" style="stroke:#000000;stroke-width:1.5;" width="638.5752" x="120.2788" y="161.8594"/><g><title>Source Agent</title><rect fill="#000000" fill-opacity="0.00000" height="530.7344" width="8" x="55.1406" y="73.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="59" x2="59" y1="73.5938" y2="604.3281"/></g><g><title>Protocol Router</title><rect fill="#000000" fill-opacity="0.00000" height="530.7344" width="8" x="187.5015" y="73.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="191.2788" x2="191.2788" y1="73.5938" y2="604.3281"/></g><g><title>A2A Handler</title><rect fill="#000000" fill-opacity="0.00000" height="530.7344" width="8" x="318.9165" y="73.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="322.0981" x2="322.0981" y1="73.5938" y2="604.3281"/></g><g><title>MCP Handler</title><rect fill="#000000" fill-opacity="0.00000" height="530.7344" width="8" x="431.6709" y="73.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="434.7349" x2="434.7349" y1="73.5938" y2="604.3281"/></g><g><title>Kafka Handler</title><rect fill="#000000" fill-opacity="0.00000" height="530.7344" width="8" x="550.082" y="73.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="553.6069" x2="553.6069" y1="73.5938" y2="604.3281"/></g><g><title>Target System</title><rect fill="#000000" fill-opacity="0.00000" height="530.7344" width="8" x="686.5879" y="73.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="690.3218" x2="690.3218" y1="73.5938" y2="604.3281"/></g><g class="participant participant-head" data-participant="Source"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="108.2813" x="5" y="42.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="94.2813" x="12" y="62.292">Source Agent</text></g><g class="participant participant-tail" data-participant="Source"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="108.2813" x="5" y="603.3281"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="94.2813" x="12" y="623.3232">Source Agent</text></g><g class="participant participant-head" data-participant="Router"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="122.4453" x="130.2788" y="42.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108.4453" x="137.2788" y="62.292">Protocol Router</text></g><g class="participant participant-tail" data-participant="Router"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="122.4453" x="130.2788" y="603.3281"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108.4453" x="137.2788" y="623.3232">Protocol Router</text></g><g class="participant participant-head" data-participant="A2A"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="101.6367" x="272.0981" y="42.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87.6367" x="279.0981" y="62.292">A2A Handler</text></g><g class="participant participant-tail" data-participant="A2A"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="101.6367" x="272.0981" y="603.3281"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87.6367" x="279.0981" y="623.3232">A2A Handler</text></g><g class="participant participant-head" data-participant="MCP"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="103.8721" x="383.7349" y="42.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89.8721" x="390.7349" y="62.292">MCP Handler</text></g><g class="participant participant-tail" data-participant="MCP"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="103.8721" x="383.7349" y="603.3281"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89.8721" x="390.7349" y="623.3232">MCP Handler</text></g><g class="participant participant-head" data-participant="Kafka"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="112.9502" x="497.6069" y="42.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="98.9502" x="504.6069" y="62.292">Kafka Handler</text></g><g class="participant participant-tail" data-participant="Kafka"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="112.9502" x="497.6069" y="603.3281"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="98.9502" x="504.6069" y="623.3232">Kafka Handler</text></g><g class="participant participant-head" data-participant="Target"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="116.5322" x="632.3218" y="42.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="102.5322" x="639.3218" y="62.292">Target System</text></g><g class="participant participant-tail" data-participant="Target"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="116.5322" x="632.3218" y="603.3281"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="102.5322" x="639.3218" y="623.3232">Target System</text></g><g class="message" data-participant-1="Source" data-participant-2="Router"><polygon fill="#181818" points="179.5015,100.7266,189.5015,104.7266,179.5015,108.7266,183.5015,104.7266" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="59.1406" x2="185.5015" y1="104.7266" y2="104.7266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="108.3608" x="66.1406" y="99.6606">Unified message</text></g><g class="message" data-participant-1="Router" data-participant-2="Router"><line style="stroke:#181818;stroke-width:1;" x1="191.5015" x2="233.5015" y1="133.8594" y2="133.8594"/><line style="stroke:#181818;stroke-width:1;" x1="233.5015" x2="233.5015" y1="133.8594" y2="146.8594"/><line style="stroke:#181818;stroke-width:1;" x1="192.5015" x2="233.5015" y1="146.8594" y2="146.8594"/><polygon fill="#181818" points="202.5015,142.8594,192.5015,146.8594,202.5015,150.8594,198.5015,146.8594" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95.1133" x="198.5015" y="128.7935">Analyze target</text></g><path d="M120.2788,161.8594 L184.7217,161.8594 L184.7217,168.9922 L174.7217,178.9922 L120.2788,178.9922 L120.2788,161.8594" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="396.3359" style="stroke:#000000;stroke-width:1.5;" width="638.5752" x="120.2788" y="161.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.4429" x="135.2788" y="174.9263">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="99.9131" x="199.7217" y="174.0698">[Internal Agent]</text><g class="message" data-participant-1="Router" data-participant-2="A2A"><polygon fill="#181818" points="310.9165,196.125,320.9165,200.125,310.9165,204.125,314.9165,200.125" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="191.5015" x2="316.9165" y1="200.125" y2="200.125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91.9141" x="198.5015" y="195.0591">Route via A2A</text></g><g class="message" data-participant-1="A2A" data-participant-2="Target"><polygon fill="#181818" points="678.5879,225.2578,688.5879,229.2578,678.5879,233.2578,682.5879,229.2578" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="322.9165" x2="684.5879" y1="229.2578" y2="229.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="107.3643" x="329.9165" y="224.1919">Direct agent call</text></g><g class="message" data-participant-1="Target" data-participant-2="A2A"><polygon fill="#181818" points="333.9165,254.3906,323.9165,258.3906,333.9165,262.3906,329.9165,258.3906" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="327.9165" x2="689.5879" y1="258.3906" y2="258.3906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="63.0195" x="339.9165" y="253.3247">Response</text></g><g class="message" data-participant-1="A2A" data-participant-2="Router"><polygon fill="#181818" points="202.5015,283.5234,192.5015,287.5234,202.5015,291.5234,198.5015,287.5234" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="196.5015" x2="321.9165" y1="287.5234" y2="287.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="107.415" x="208.5015" y="282.4575">Return response</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="120.2788" x2="758.854" y1="296.5234" y2="296.5234"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="111.4824" x="125.2788" y="306.7339">[External System]</text><g class="message" data-participant-1="Router" data-participant-2="MCP"><polygon fill="#181818" points="423.6709,327.4609,433.6709,331.4609,423.6709,335.4609,427.6709,331.4609" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="191.5015" x2="429.6709" y1="331.4609" y2="331.4609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="93.9897" x="198.5015" y="326.395">Route via MCP</text></g><g class="message" data-participant-1="MCP" data-participant-2="Target"><polygon fill="#181818" points="678.5879,356.5938,688.5879,360.5938,678.5879,364.5938,682.5879,360.5938" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="435.6709" x2="684.5879" y1="360.5938" y2="360.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="83.3511" x="442.6709" y="355.5278">MCP tool call</text></g><g class="message" data-participant-1="Target" data-participant-2="MCP"><polygon fill="#181818" points="446.6709,385.7266,436.6709,389.7266,446.6709,393.7266,442.6709,389.7266" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="440.6709" x2="689.5879" y1="389.7266" y2="389.7266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="90.9238" x="452.6709" y="384.6606">Tool response</text></g><g class="message" data-participant-1="MCP" data-participant-2="Router"><polygon fill="#181818" points="202.5015,414.8594,192.5015,418.8594,202.5015,422.8594,198.5015,418.8594" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="196.5015" x2="434.6709" y1="418.8594" y2="418.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="107.415" x="208.5015" y="413.7935">Return response</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="120.2788" x2="758.854" y1="427.8594" y2="427.8594"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="94.0693" x="125.2788" y="438.0698">[Event Stream]</text><g class="message" data-participant-1="Router" data-participant-2="Kafka"><polygon fill="#181818" points="542.082,458.7969,552.082,462.7969,542.082,466.7969,546.082,462.7969" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="191.5015" x2="548.082" y1="462.7969" y2="462.7969"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102.4194" x="198.5015" y="457.731">Route via Kafka</text></g><g class="message" data-participant-1="Kafka" data-participant-2="Target"><polygon fill="#181818" points="678.5879,487.9297,688.5879,491.9297,678.5879,495.9297,682.5879,491.9297" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="554.082" x2="684.5879" y1="491.9297" y2="491.9297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99.7979" x="561.082" y="486.8638">Event message</text></g><g class="message" data-participant-1="Target" data-participant-2="Kafka"><polygon fill="#181818" points="565.082,517.0625,555.082,521.0625,565.082,525.0625,561.082,521.0625" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="559.082" x2="689.5879" y1="521.0625" y2="521.0625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="112.5059" x="571.082" y="515.9966">Acknowledgment</text></g><g class="message" data-participant-1="Kafka" data-participant-2="Router"><polygon fill="#181818" points="202.5015,546.1953,192.5015,550.1953,202.5015,554.1953,198.5015,550.1953" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="196.5015" x2="553.082" y1="550.1953" y2="550.1953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="107.8022" x="208.5015" y="545.1294">Confirm delivery</text></g><g class="message" data-participant-1="Router" data-participant-2="Source"><polygon fill="#181818" points="70.1406,582.3281,60.1406,586.3281,70.1406,590.3281,66.1406,586.3281" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="64.1406" x2="190.5015" y1="586.3281" y2="586.3281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94.3706" x="76.1406" y="581.2622">Final response</text></g><!--SRC=[VPBFQiCm38VlVWhHUoyxvZ08tSh629IsUm2HgC7KiOkjjEkUVlwJP7OPoocMl_pu98KbAu9cL2pNEslOj4P1GyvXJx1LvYR41ItBLbvGCwmEPhGjGTsJvXMWWrGeeILeRqOc6xdqMdBrKmrlg3irCVvS0ircLm3-N08VU3fZWSHA2HtHziHmk3kc8KAf8iJKpVfvqglWKykJf0w6D0AHwZbHQrJtRm9E6QWOthM_yUKq5W7- -VtEDrMb8rmbnXu347htjycaWXTfgMN0400jAXMXoNn98NSnsb4UC6ljYKUhmSu8AKVm-ZM9fTuVpFmqSxCmt024eMTcuSZ6B_CFgvXm39SsLviI_bUxXauFR0aVlU8ASxEqqm2bVMTsAMRULcatvTJjMPkReguVvkqiCRFYnkYJj0DqfEILx5sGxhBTf_-aWgqCmrmQ-G40]--></g></svg>