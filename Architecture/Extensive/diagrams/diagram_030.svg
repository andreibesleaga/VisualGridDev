<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="593px" preserveAspectRatio="none" style="width:642px;height:593px;background:#FFFFFF;" version="1.1" viewBox="0 0 642 593" width="642px" zoomAndPan="magnify"><title>Protocol Negotiation Sequence</title><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="245.2461" x="199.6931" y="27.9951">Protocol Negotiation Sequence</text><rect fill="none" height="178.0781" style="stroke:#000000;stroke-width:1.5;" width="495.0679" x="140.5645" y="304.3906"/><g><title>Client Agent</title><rect fill="#000000" fill-opacity="0.00000" height="484.1406" width="8" x="51.21" y="73.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="55" x2="55" y1="73.5938" y2="557.7344"/></g><g><title>Protocol Router</title><rect fill="#000000" fill-opacity="0.00000" height="484.1406" width="8" x="207.7871" y="73.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="211.5645" x2="211.5645" y1="73.5938" y2="557.7344"/></g><g><title>Fitness Evaluator</title><rect fill="#000000" fill-opacity="0.00000" height="484.1406" width="8" x="371.1816" y="73.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="374.7725" x2="374.7725" y1="73.5938" y2="557.7344"/></g><g><title>Target Agent</title><rect fill="#000000" fill-opacity="0.00000" height="484.1406" width="8" x="568.7495" y="73.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="571.8667" x2="571.8667" y1="73.5938" y2="557.7344"/></g><g class="participant participant-head" data-participant="Client"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="100.4199" x="5" y="42.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86.4199" x="12" y="62.292">Client Agent</text></g><g class="participant participant-tail" data-participant="Client"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="100.4199" x="5" y="556.7344"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86.4199" x="12" y="576.7295">Client Agent</text></g><g class="participant participant-head" data-participant="Router"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="122.4453" x="150.5645" y="42.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108.4453" x="157.5645" y="62.292">Protocol Router</text></g><g class="participant participant-tail" data-participant="Router"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="122.4453" x="150.5645" y="556.7344"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108.4453" x="157.5645" y="576.7295">Protocol Router</text></g><g class="participant participant-head" data-participant="Fitness"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="134.8184" x="307.7725" y="42.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="120.8184" x="314.7725" y="62.292">Fitness Evaluator</text></g><g class="participant participant-tail" data-participant="Fitness"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="134.8184" x="307.7725" y="556.7344"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="120.8184" x="314.7725" y="576.7295">Fitness Evaluator</text></g><g class="participant participant-head" data-participant="Target"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="105.7656" x="519.8667" y="42.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="91.7656" x="526.8667" y="62.292">Target Agent</text></g><g class="participant participant-tail" data-participant="Target"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="105.7656" x="519.8667" y="556.7344"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="91.7656" x="526.8667" y="576.7295">Target Agent</text></g><g class="message" data-participant-1="Client" data-participant-2="Router"><polygon fill="#181818" points="199.7871,100.7266,209.7871,104.7266,199.7871,108.7266,203.7871,104.7266" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="55.21" x2="205.7871" y1="104.7266" y2="104.7266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="132.5771" x="62.21" y="99.6606">Message with target</text></g><g class="message" data-participant-1="Router" data-participant-2="Fitness"><polygon fill="#181818" points="363.1816,129.8594,373.1816,133.8594,363.1816,137.8594,367.1816,133.8594" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="211.7871" x2="369.1816" y1="133.8594" y2="133.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121.0054" x="218.7871" y="128.7935">Evaluate protocols</text></g><g class="message" data-participant-1="Fitness" data-participant-2="Fitness"><line style="stroke:#181818;stroke-width:1;" x1="375.1816" x2="417.1816" y1="162.9922" y2="162.9922"/><line style="stroke:#181818;stroke-width:1;" x1="417.1816" x2="417.1816" y1="162.9922" y2="175.9922"/><line style="stroke:#181818;stroke-width:1;" x1="376.1816" x2="417.1816" y1="175.9922" y2="175.9922"/><polygon fill="#181818" points="386.1816,171.9922,376.1816,175.9922,386.1816,179.9922,382.1816,175.9922" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="183.5679" x="382.1816" y="157.9263">Check latency requirements</text></g><g class="message" data-participant-1="Fitness" data-participant-2="Fitness"><line style="stroke:#181818;stroke-width:1;" x1="375.1816" x2="417.1816" y1="205.125" y2="205.125"/><line style="stroke:#181818;stroke-width:1;" x1="417.1816" x2="417.1816" y1="205.125" y2="218.125"/><line style="stroke:#181818;stroke-width:1;" x1="376.1816" x2="417.1816" y1="218.125" y2="218.125"/><polygon fill="#181818" points="386.1816,214.125,376.1816,218.125,386.1816,222.125,382.1816,218.125" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="147.9258" x="382.1816" y="200.0591">Check reliability needs</text></g><g class="message" data-participant-1="Fitness" data-participant-2="Fitness"><line style="stroke:#181818;stroke-width:1;" x1="375.1816" x2="417.1816" y1="247.2578" y2="247.2578"/><line style="stroke:#181818;stroke-width:1;" x1="417.1816" x2="417.1816" y1="247.2578" y2="260.2578"/><line style="stroke:#181818;stroke-width:1;" x1="376.1816" x2="417.1816" y1="260.2578" y2="260.2578"/><polygon fill="#181818" points="386.1816,256.2578,376.1816,260.2578,386.1816,264.2578,382.1816,260.2578" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131.0728" x="382.1816" y="242.1919">Check security level</text></g><g class="message" data-participant-1="Fitness" data-participant-2="Router"><polygon fill="#181818" points="222.7871,285.3906,212.7871,289.3906,222.7871,293.3906,218.7871,289.3906" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="216.7871" x2="374.1816" y1="289.3906" y2="289.3906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="139.3945" x="228.7871" y="284.3247">Recommend protocol</text></g><path d="M140.5645,304.3906 L205.0073,304.3906 L205.0073,311.5234 L195.0073,321.5234 L140.5645,321.5234 L140.5645,304.3906" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="178.0781" style="stroke:#000000;stroke-width:1.5;" width="495.0679" x="140.5645" y="304.3906"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.4429" x="155.5645" y="317.4575">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="89.0044" x="220.0073" y="316.6011">[High Priority]</text><g class="message" data-participant-1="Router" data-participant-2="Target"><polygon fill="#181818" points="560.7495,338.6563,570.7495,342.6563,560.7495,346.6563,564.7495,342.6563" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="211.7871" x2="566.7495" y1="342.6563" y2="342.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="62.6196" x="218.7871" y="337.5903">Use gRPC</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="140.5645" x2="635.6323" y1="351.6563" y2="351.6563"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="105.875" x="145.5645" y="361.8667">[Agent-to-Agent]</text><g class="message" data-participant-1="Router" data-participant-2="Target"><polygon fill="#181818" points="560.7495,382.5938,570.7495,386.5938,560.7495,390.5938,564.7495,386.5938" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="211.7871" x2="566.7495" y1="386.5938" y2="386.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="54.4756" x="218.7871" y="381.5278">Use A2A</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="140.5645" x2="635.6323" y1="395.5938" y2="395.5938"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="111.4824" x="145.5645" y="405.8042">[External System]</text><g class="message" data-participant-1="Router" data-participant-2="Target"><polygon fill="#181818" points="560.7495,426.5313,570.7495,430.5313,560.7495,434.5313,564.7495,430.5313" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="211.7871" x2="566.7495" y1="430.5313" y2="430.5313"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="56.5513" x="218.7871" y="425.4653">Use MCP</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="140.5645" x2="635.6323" y1="439.5313" y2="439.5313"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="55.7144" x="145.5645" y="449.7417">[Default]</text><g class="message" data-participant-1="Router" data-participant-2="Target"><polygon fill="#181818" points="560.7495,470.4688,570.7495,474.4688,560.7495,478.4688,564.7495,474.4688" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="211.7871" x2="566.7495" y1="474.4688" y2="474.4688"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="101.499" x="218.7871" y="469.4028">Use WebSocket</text></g><g class="message" data-participant-1="Target" data-participant-2="Router"><polygon fill="#181818" points="222.7871,506.6016,212.7871,510.6016,222.7871,514.6016,218.7871,510.6016" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="216.7871" x2="571.7495" y1="510.6016" y2="510.6016"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="63.0195" x="228.7871" y="505.5356">Response</text></g><g class="message" data-participant-1="Router" data-participant-2="Client"><polygon fill="#181818" points="66.21,535.7344,56.21,539.7344,66.21,543.7344,62.21,539.7344" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="60.21" x2="210.7871" y1="539.7344" y2="539.7344"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="109.7319" x="72.21" y="534.6685">Deliver response</text></g><!--SRC=[VP5DRy8m38Rl-HKMzrvsx64IwfXsOK9qqyuXUCN292LnsVZtCwHbxQKv99RplFuK4aROn2311OPtR8AG5GeUQZntw1qQqzeevAYrNc1HCQ6-oqRl1TW4sJ657W6teHECTowRK-wLn6DAiBfOxgo4JFRUAVfXOuFZlDbXJ5zGyTndA66jOjiW_90SG3AM_svK7xqSaYAqVRN93FMCiUg0xWYie7TNY3eLYdZIb7DuH2Qx8oQvWaVSpx49NHTl8EC5UGmE3MtHXPEct3zADSQom1ir1rqUXPlSW9x_DlDuIlXC2CrsKnbajUxZAoGKTsD6idnQPiNgLt-zPQYlIV0q8rbNconvmM_RyLpqBzpLmHrrBzgKCVrk9nsdDlY4extbFPSQdUcYhZWWVm00]--></g></svg>